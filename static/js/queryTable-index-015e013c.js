var ae=Object.defineProperty,ne=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Y=(e,r,a)=>r in e?ae(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,S=(e,r)=>{for(var a in r||(r={}))le.call(r,a)&&Y(e,a,r[a]);if(j)for(var a of j(r))se.call(r,a)&&Y(e,a,r[a]);return e},z=(e,r)=>ne(e,oe(r));var T=(e,r,a)=>new Promise((o,l)=>{var s=c=>{try{d(a.next(c))}catch(i){l(i)}},f=c=>{try{d(a.throw(c))}catch(i){l(i)}},d=c=>c.done?o(c.value):Promise.resolve(c.value).then(s,f);d((a=a.apply(e,r)).next())});import{a as n,_ as B,R as Q}from"./lib-4d799710.js";import{C as J,N as ie,ak as ue,u as ce,c as me,B as de,a1 as fe,A as pe,b as q,aN as N,aO as L,a as t,F as G,j as g,ae as K,ax as Ce,a5 as he}from"./index-cfe04051.js";import"./index-4204792a.js";import{S as I}from"./index-6b36a862.js";import{C as U}from"./index-7fd9bfe8.js";import{P as xe}from"./index-d2be0613.js";import{T as ve}from"./index-d70a012e.js";import"./index-887fb246.js";import"./index-d45e4b00.js";import{u as ge}from"./index-ae4cf58c.js";import{S as W}from"./index-5ee17751.js";import"./index-dadad302.js";import"./index-c9c05576.js";import"./index-ff569dcc.js";import{R as X,C as R}from"./index-acc7fe81.js";import{g as Fe,P as be}from"./index-6a6120fd.js";import{A as ye,M as Z}from"./index-b5ac0747.js";import{T as $}from"./index-6994d4d9.js";import{F as h}from"./index-17bf1db0.js";import{D as Ee}from"./DatePicker-23cfdf6d.js";import{I as A}from"./index-98656a32.js";import{B as E,c as ke}from"./button-a84f60f8.js";import{S as we}from"./index-82140de5.js";import{m as De}from"./vendor-8c87efda.js";import{K as Pe}from"./KeyCode-70687226.js";import"./toArray-94a3643f.js";import"./useFlexGapSupport-641d93a2.js";import"./index-92064b3c.js";import"./RightOutlined-7a61e56f.js";import"./colors-4a342a81.js";import"./responsiveObserve-14c5602e.js";import"./getDataOrAriaProps-140767b0.js";function Se(e){var r=e.prefixCls,a=e.okButtonProps,o=e.cancelButtonProps,l=e.title,s=e.cancelText,f=e.okText,d=e.okType,c=e.icon,i=e.showCancel,C=i===void 0?!0:i,D=e.close,k=e.onConfirm,v=e.onCancel,F=n.exports.useContext(J),P=F.getPrefixCls;return n.exports.createElement(ie,{componentName:"Popconfirm",defaultLocale:ue.Popconfirm},function(x){return n.exports.createElement("div",{className:"".concat(r,"-inner-content")},n.exports.createElement("div",{className:"".concat(r,"-message")},c,n.exports.createElement("div",{className:"".concat(r,"-message-title")},Fe(l))),n.exports.createElement("div",{className:"".concat(r,"-buttons")},C&&n.exports.createElement(E,B({onClick:v,size:"small"},o),s||x.cancelText),n.exports.createElement(ye,{buttonProps:B(B({size:"small"},ke(d)),a),actionFn:k,close:D,prefixCls:P("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},f||x.okText)))})}var H=globalThis,Te=globalThis&&globalThis.__rest||function(e,r){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(a[o[l]]=e[o[l]]);return a},ee=n.exports.forwardRef(function(e,r){var a=n.exports.useContext(J),o=a.getPrefixCls,l=ge(!1,{value:e.visible,defaultValue:e.defaultVisible}),s=ce(l,2),f=s[0],d=s[1],c=function(m,p){var y;d(m,!0),(y=e.onVisibleChange)===null||y===void 0||y.call(e,m,p)},i=function(m){c(!1,m)},C=function(m){var p;return(p=e.onConfirm)===null||p===void 0?void 0:p.call(H,m)},D=function(m){var p;c(!1,m),(p=e.onCancel)===null||p===void 0||p.call(H,m)},k=function(m){m.keyCode===Pe.ESC&&f&&c(!1,m)},v=function(m){var p=e.disabled;p||c(m)},F=e.prefixCls,P=e.placement,x=e.children,O=e.overlayClassName,u=Te(e,["prefixCls","placement","children","overlayClassName"]),b=o("popover",F),_=o("popconfirm",F),re=me(_,O);return n.exports.createElement(be,B({},u,{prefixCls:b,placement:P,onVisibleChange:v,visible:f,_overlay:n.exports.createElement(Se,B({},e,{prefixCls:b,close:i,onConfirm:C,onCancel:D})),overlayClassName:re,ref:r}),de(x,{onKeyDown:function(m){var p,y;n.exports.isValidElement(x)&&((y=x==null?void 0:(p=x.props).onKeyDown)===null||y===void 0||y.call(p,m)),k(m)}}))});ee.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:n.exports.createElement(fe,null),disabled:!1};var Be=ee,Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},_e=Oe,te=function(r,a){return n.exports.createElement(pe,q(q({},r),{},{ref:a,icon:_e}))};te.displayName="DeleteOutlined";var Ie=n.exports.forwardRef(te);const V="/api/v1/list";function Re(e){return N({url:V,method:"get",params:e})}function Ne(e){return N({url:V,method:"put",data:e})}function Ve(e){return N({url:V,method:"delete",data:e})}function ze(e){return N({url:V,method:"post",data:e})}function Me(e){const[r,a]=n.exports.useState(L(e)?e():e),o=n.exports.useRef(r),l=n.exports.useCallback(s=>{o.current=L(s)?s(o.current):s,a(o.current)},[]);return[r,l,o]}const{RangePicker:Ke}=Ee,{Option:Ae}=W,je=[{value:1,label:"\u5DF2\u5F00\u542F"},{value:2,label:"\u5DF2\u5173\u95ED"}],M=({children:e})=>t(R,{xxl:6,xl:8,lg:8,md:12,sm:12,xs:24,children:e}),Ye=Q.memo(({onChange:e})=>{const[r]=h.useForm();function a(s){const f={name:s.name,status:s.status,createTime:s.createTime?[s.createTime[0].format("YYYY-MM-DD"),s.createTime[1].format("YYYY-MM-DD")]:void 0};console.log(f),e(f)}function o(){r.resetFields(),l()}function l(){r.submit()}return t(G,{children:t(U,{bordered:!1,children:t(h,{form:r,onFinish:a,children:g(X,{gutter:[24,0],children:[t(M,{children:t(h.Item,{label:"\u540D\u79F0",name:"name",children:t(A,{placeholder:"\u8F93\u5165\u540D\u79F0",allowClear:!0,onPressEnter:l})})}),t(M,{children:t(h.Item,{label:"\u72B6\u6001",name:"status",children:t(W,{placeholder:"\u9009\u62E9\u72B6\u6001",allowClear:!0,onChange:l,children:je.map(s=>t(Ae,{value:s.value,children:s.label},"status"+s.value))})})}),t(M,{children:t(h.Item,{label:"\u65E5\u671F\u8303\u56F4",name:"createTime",children:t(Ke,{allowClear:!0,onChange:l})})}),t(R,{span:24,style:{textAlign:"right"},children:t(h.Item,{style:{marginBottom:"0"},children:g(I,{children:[t(E,{type:"primary",onClick:l,children:"\u67E5\u8BE2"}),t(E,{onClick:o,children:"\u91CD\u7F6E"})]})})})]})})})})}),qe=Q.forwardRef(({onRefresh:e},r)=>{const[a]=h.useForm(),[o,l]=n.exports.useState(!1),[s,f]=n.exports.useState(""),d=n.exports.useRef({});n.exports.useImperativeHandle(r,()=>({open(i={status:1}){f(i.id?"\u7F16\u8F91\u89C4\u5219":"\u65B0\u589E\u89C4\u5219"),d.current=S({},i),a.setFieldsValue(z(S({},i),{status:i.status?i.status===1:!1})),l(!0)}}));const c=n.exports.useCallback(()=>T(void 0,null,function*(){const i=yield a.validateFields(),C=De(d.current,z(S({},i),{status:i.status?1:2}));C.id?(yield Ne(C),K.success({message:"\u7F16\u8F91\u6210\u529F"})):(yield ze(C),K.success({message:"\u65B0\u589E\u6210\u529F"})),a.resetFields(),d.current={},l(!1),e&&e()}),[]);return t(Z,{title:s,visible:o,onOk:c,onCancel:()=>{a.resetFields(),d.current={},l(!1)},children:g(h,{form:a,labelCol:{span:4},wrapperCol:{span:20},children:[t(h.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:""}],children:t(A,{})}),t(h.Item,{label:"\u63CF\u8FF0",name:"description",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63CF\u8FF0"}],children:t(A,{})}),t(h.Item,{label:"\u5F00\u5173",name:"status",valuePropName:"checked",children:t(we,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})})]})})});function Et(){const[e,r]=n.exports.useState([]),[a,o]=n.exports.useState(!1),[l,s]=n.exports.useState(1),[f,d,c]=Me(1),i=n.exports.useRef(null),[C,D]=n.exports.useState([]),k=n.exports.useRef({name:void 0,createTime:void 0,status:void 0}),v=n.exports.useCallback(()=>T(this,null,function*(){const u=yield Re(S({pageIndex:c.current},k.current));r(u.data.list),s(u.data.count),yield Ce(500),o(!1)}),[]),F=n.exports.useCallback(()=>T(this,null,function*(){d(1),v()}),[]),P=n.exports.useCallback(u=>{k.current=u,F()},[]),x=n.exports.useCallback(u=>{d(u),v()},[]),O=n.exports.useCallback(u=>T(this,null,function*(){yield Ve(u),K.success({message:"\u5220\u9664\u6210\u529F"}),v()}),[]);return n.exports.useEffect(()=>{F()},[]),g(G,{children:[t(Ye,{onChange:P}),t(qe,{ref:i,onRefresh:v}),g(U,{style:{marginTop:"20px"},bordered:!1,children:[g(X,{style:{marginBottom:"20px"},children:[t(R,{span:12,children:g(I,{children:[t(E,{type:"primary",icon:t(xe,{}),onClick:()=>{var u;(u=i.current)==null||u.open()},children:"\u65B0\u589E"}),t(E,{danger:!0,type:"primary",disabled:!C.length,onClick:()=>{Z.confirm({title:"\u63D0\u793A\uFF01",icon:t(he,{}),content:"\u786E\u8BA4\u5220\u9664\u8BE5"+C.length+"\u6761\u6570\u636E\u5417",onOk(){return O(C)}})},icon:t(Ie,{}),children:"\u5220\u9664"})]})}),t(R,{span:12,style:{textAlign:"right"},children:t(I,{})})]}),t(ve,{dataSource:e,rowKey:u=>u.id,pagination:{current:f,defaultCurrent:f,defaultPageSize:10,pageSize:10,total:l,onChange:x,showQuickJumper:!0,showSizeChanger:!1,size:"small"},rowSelection:{selectedRowKeys:C,onChange:u=>{D(u)}},columns:[{title:"\u7F16\u53F7",dataIndex:"id",key:"id"},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u63CF\u8FF0",dataIndex:"description"},{title:"\u72B6\u6001",dataIndex:"status",render:(u,b)=>b.status===1?t($,{color:"green",children:"\u5DF2\u5F00\u542F"}):t($,{color:"red",children:"\u5DF2\u5173\u95ED"})},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime"},{title:"\u64CD\u4F5C",key:"action",render:(u,b)=>g(I,{size:"small",children:[t(E,{size:"small",onClick:()=>{var _;(_=i.current)==null||_.open(b)},children:"\u7F16\u8F91"}),t(Be,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u6761\u6570\u636E\uFF1F",onConfirm:()=>O([b.id]),children:t(E,{danger:!0,size:"small",children:"\u5220\u9664"})})]})}],loading:a})]})]})}export{Et as default};
